(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{505:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(20);function a(){var t=Object(i.a)(["\n    color: #999;\n    position: fixed;\n    right: 2%;\n    bottom: 30px;\n    width: 70px;\n    height: 60px;\n    line-height: 60px;\n    font-size: 14px;\n    text-align: center;\n    border: 1px solid #dcdcdc;\n    border-radius: 4px;\n    cursor: pointer;\n    background-color: #fff;\n    opacity: 0.8;\n"]);return a=function(){return t},t}var s=n(21).b.div(a())},698:function(t,e,n){},699:function(t,e,n){"use strict";n.r(e);var i=n(137),a=n(138),s=n(141),r=n(139),c=n(142),o=n(140),l=n(1),p=n.n(l),h=n(56),u=n(86),m=n(217),d=n.n(m),f=n(510),v=n.n(f),g=n(511),E=n.n(g),T=(n(698),n(220)),b=n(54),x=n(505);v.a.setOptions({highlight:function(t){return E.a.highlightAuto(t).value}});var y=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(s.a)(this,Object(r.a)(e).call(this,t))).state={focus:!1,isEmpty:!0,isEmptyTitle:!0,showTip:!1},n.handleTitleInput=n.handleTitleInput.bind(Object(c.a)(n)),n.handleInput=n.handleInput.bind(Object(c.a)(n)),n.clear=n.clear.bind(Object(c.a)(n)),n.save=n.save.bind(Object(c.a)(n)),n}return Object(o.a)(e,t),Object(a.a)(e,[{key:"checkIsEmpty",value:function(t){return""===t.trim()}},{key:"handleTitleInput",value:function(t){var e=t.target.value.substr(0,50),n=this.checkIsEmpty(e);this.setState(function(){return{isEmptyTitle:n,showTip:!1}}),this.props.changeTitle(e)}},{key:"handleInput",value:function(t){var e=t.target.innerText||t.target.textContent,n=v()(e,{breaks:!0}),i=this.checkIsEmpty(e);this.setState(function(){return{isEmpty:i,showTip:!1}}),this.props.changeText(e),this.props.changeHtml(n)}},{key:"getPlainText",value:function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.innerText||e.textContent;return e=null,n}},{key:"save",value:function(){var t=this.checkIsEmpty(this.props.title),e=this.checkIsEmpty(this.props.text);if(this.setState(function(){return{isEmptyTitle:t,isEmpty:e}}),this.props.islive)if(t||e)this.setState({showTip:!0});else{var n=this.props.html,i=this.getPlainText(n).substr(0,90)+"\u2026\u2026",a={title:this.props.title,text:this.props.text,html:n,desc:i,author:this.props.author,id:this.props.id};this.props.postArticle(a,this.ipt)}else alert("\u8bf7\u5148\u6fc0\u6d3b Email")}},{key:"clear",value:function(){this.setState({html:"",isEmpty:!0}),this.ipt.innerText="",this.props.changeTitle(""),this.props.changeText(""),this.props.changeHtml("")}},{key:"handleScrollTop",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"componentDidMount",value:function(){this.props.changePath(this.props.history.location.pathname);var t=this.props.location.search.replace(/^\?=/,"");""!==t&&(this.props.getDetail(t,this.ipt),this.setState(function(){return{isEmpty:!1,isEmptyTitle:!1}})),document.title="\u5199\u6587\u7ae0-rr"}},{key:"render",value:function(){var t=this,e=this.props,n=e.isAuthenticated,i=e.postStatus,a=e.title,s=e.html,r=d()({postTip:!0,success:1===i,failed:-1===i});return n?p.a.createElement("div",{className:!0===this.state.focus?"TextEditor focus":"TextEditor"},p.a.createElement("div",{className:"titleEditor"},p.a.createElement("input",{className:"title",onChange:this.handleTitleInput,type:"text",value:a,placeholder:"\u8bf7\u8f93\u5165\u6807\u9898\uff08\u6700\u591a50\u4e2a\u5b57\uff09",autoFocus:!0})),p.a.createElement("div",{className:!0===this.state.focus?"textareaWrap focus":"textareaWrap"},p.a.createElement("div",{className:"textarea",contentEditable:"true",ref:function(e){return t.ipt=e},onInput:this.handleInput,onFocus:function(){t.setState({focus:!0})},onBlur:function(){t.setState({focus:!1})}}),p.a.createElement("div",{className:this.state.isEmpty?"placeholder":"hide placeholder"},"\u8bf7\u8f93\u5165\u6b63\u6587\uff08\u652f\u6301 Markdown\uff09"),p.a.createElement("div",{className:"App-btn"},p.a.createElement("i",{onClick:function(){return t.ipt.focus()},className:"iconfont",title:"\u7f16\u8f91"},"\ue65c "),p.a.createElement("input",{onClick:this.save,type:"button",className:"submit",value:"\u53d1\u5e03"}),p.a.createElement("input",{onClick:this.clear,type:"button",className:"clear",value:"\u6e05\u7a7a"})),p.a.createElement("span",{className:this.state.showTip?"TextEditor-tip show":"TextEditor-tip"},"\u6807\u9898\u6216\u6b63\u6587\u4e3a\u7a7a\uff0c\u8bf7\u8f93\u5165")),p.a.createElement("div",{className:this.state.isEmpty?"empty preview marked":"preview marked",dangerouslySetInnerHTML:{__html:s}}),p.a.createElement("div",{className:r},1===i?"\u6587\u7ae0\u53d1\u8868\u6210\u529f":-1===i?"\u670d\u52a1\u5668\u9519\u8bef\u8bf7\u7a0d\u540e\u518d\u8bd5":""),p.a.createElement(x.a,{onClick:this.handleScrollTop},"BackTop")):p.a.createElement(h.a,{to:"/login"})}}]),e}(p.a.PureComponent);e.default=Object(u.b)(function(t){return{isAuthenticated:t.getIn(["login","isAuthenticated"]),author:t.getIn(["login","user","name"]),islive:t.getIn(["login","user","islive"]),postStatus:t.getIn(["write","postStatus"]),title:t.getIn(["write","title"]),html:t.getIn(["write","html"]),text:t.getIn(["write","text"]),id:t.getIn(["write","id"])}},function(t){return{changePath:function(e){t(b.a.changePath(e))},postArticle:function(e,n){t(T.a.postArticle(e,n))},changeTitle:function(e){t(T.a.changeTitle(e))},changeHtml:function(e){t(T.a.changeHtml(e))},changeText:function(e){t(T.a.changeText(e))},getDetail:function(e,n){t(T.a.getDetail(e,n))}}})(Object(h.f)(y))}}]);
//# sourceMappingURL=5.a2ea5f79.chunk.js.map