{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","pages/login/style.js","pages/login/index.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__webpack_require__","d","__webpack_exports__","LoginWrapper","styled","div","_templateObject","logoPic","LoginBox","_templateObject2","LoginTitle","h4","_templateObject3","SignIn","span","_templateObject4","SignUp","_templateObject5","Input","input","_templateObject6","Button","_templateObject7","Tip","_templateObject8","Login","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","account","password","errors","handleInputChange","bind","assertThisInitialized","handleSubmit","e","setState","target","name","preventDefault","user","props","loginUser","document","title","clearErrors","_this$props","isAuthenticated","react_default","a","createElement","react_router","to","react_router_dom","placeholder","onChange","get","type","onClick","React","PureComponent","connect","getIn","dispatch","actionCreators","withRouter"],"mappings":"0FAAe,SAAAA,EAAAC,EAAAC,EAAAC,GAYf,OAXAD,KAAAD,EACAG,OAAAC,eAAAJ,EAAAC,EAAA,CACAC,QACAG,YAAA,EACAC,cAAA,EACAC,UAAA,IAGAP,EAAAC,GAAAC,EAGAF,EAZAQ,EAAAC,EAAAC,EAAA,sBAAAX,wlECGO,IAAMY,EAAeC,IAAOC,IAAVC,IAOHC,KAGTC,EAAWJ,IAAOC,IAAVI,KAaRC,EAAaN,IAAOO,GAAVC,KAaVC,EAAST,IAAOU,KAAVC,KAONC,EAASZ,IAAOU,KAAVG,KAMNC,EAAQd,IAAOe,MAAVC,KASLC,EAASjB,IAAOC,IAAViB,KAUNC,EAAKnB,IAAOC,IAATmB,KCvDVC,cACF,SAAAA,IAAc,IAAAC,EAAA,OAAA/B,OAAAgC,EAAA,EAAAhC,CAAAiC,KAAAH,IACVC,EAAA/B,OAAAkC,EAAA,EAAAlC,CAAAiC,KAAAjC,OAAAmC,EAAA,EAAAnC,CAAA8B,GAAAM,KAAAH,QACKI,MAAQ,CACTC,QAAS,GACTC,SAAU,GACVC,OAAQ,IAEZT,EAAKU,kBAAoBV,EAAKU,kBAAkBC,KAAvB1C,OAAA2C,EAAA,EAAA3C,CAAA+B,IACzBA,EAAKa,aAAeb,EAAKa,aAAaF,KAAlB1C,OAAA2C,EAAA,EAAA3C,CAAA+B,IARVA,iFAWIc,GACdZ,KAAKa,SAAL9C,OAAAC,EAAA,EAAAD,CAAA,GACK6C,EAAEE,OAAOC,KAAOH,EAAEE,OAAOhD,6CAIrB8C,GACTA,EAAEI,iBACF,IAAMC,EAAO,CACTZ,QAASL,KAAKI,MAAMC,QACpBC,SAAUN,KAAKI,MAAME,UAEzBN,KAAKkB,MAAMC,UAAUF,+CASrBG,SAASC,MAAQ,iEAIjBrB,KAAKkB,MAAMI,+CAGN,IAAAC,EAC+BvB,KAAKkB,MAAjCM,EADHD,EACGC,gBAAiBjB,EADpBgB,EACoBhB,OAEzB,OAAKiB,EAgCMC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUC,GAAG,MA9BhBJ,EAAAC,EAAAC,cAACpD,EAAD,KACIkD,EAAAC,EAAAC,cAAC/C,EAAD,KACI6C,EAAAC,EAAAC,cAAC7C,EAAD,KACI2C,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMD,GAAG,UACLJ,EAAAC,EAAAC,cAAC1C,EAAD,sBAEJwC,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAMD,GAAG,aACLJ,EAAAC,EAAAC,cAACvC,EAAD,uBAGRqC,EAAAC,EAAAC,cAACrC,EAAD,CACIyC,YAAY,6CACZhB,KAAK,UACLjD,MAAOkC,KAAKI,MAAMC,QAClB2B,SAAUhC,KAAKQ,oBACnBiB,EAAAC,EAAAC,cAAChC,EAAD,KAAMY,EAAO0B,IAAI,YACjBR,EAAAC,EAAAC,cAACrC,EAAD,CACIyC,YAAY,eACZhB,KAAK,WACLmB,KAAK,WACLpE,MAAOkC,KAAKI,MAAME,SAClB0B,SAAUhC,KAAKQ,oBACnBiB,EAAAC,EAAAC,cAAChC,EAAD,KAAMY,EAAO0B,IAAI,aACjBR,EAAAC,EAAAC,cAAClC,EAAD,CACI0C,QAASnC,KAAKW,cADlB,yBApEJyB,IAAMC,eAoGXC,sBAdS,SAAAlC,GAAK,MAAK,CAC9BoB,gBAAiBpB,EAAMmC,MAAM,CAAC,QAAS,oBACvChC,OAAQH,EAAMmC,MAAM,CAAC,QAAS,aAGP,SAAAC,GAAQ,MAAK,CACpCrB,UADoC,SAC1BF,GACNuB,EAASC,IAAetB,UAAUF,KAEtCK,YAJoC,WAKhCkB,EAASC,IAAenB,kBAIjBgB,CAA6CI,YAAW7C","file":"static/js/7.ca08a015.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import styled from 'styled-components';\r\nimport logoPic from '../../statics/logo.png';\r\n\r\nexport const LoginWrapper = styled.div`\r\n    box-sizing: border-box;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    top: 0;\r\n    background: url(${logoPic}) no-repeat 90% bottom;\r\n    background-color: #eee;\r\n`\r\nexport const LoginBox = styled.div`\r\n    width: 400px;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin-left: -200px;\r\n    margin-top: -200px;\r\n    box-sizing: border-box;\r\n    padding: 50px;\r\n    background-color: #fff;\r\n    border-radius: 4px;\r\n    box-shadow: 0 0 8px rgba(0,0,0,.1);\r\n`\r\nexport const LoginTitle = styled.h4`\r\n    width: 142px;\r\n    margin: 0 auto 30px auto;\r\n    padding: 10px;\r\n    font-weight: 400;\r\n    color: #969696;\r\n    span {\r\n        padding: 10px;\r\n        cursor: pointer;\r\n        font-size: 18px;\r\n    };\r\n    overflow: hidden;\r\n`\r\nexport const SignIn = styled.span`\r\n    font-weight: 700;\r\n    color: #e7503f;\r\n    border-bottom: 2px solid #e7503f;\r\n    float: left;\r\n    margin-right: 30px;\r\n`\r\nexport const SignUp = styled.span`\r\n    font-weight: 700;\r\n    border-bottom: 2px solid #fff;\r\n    float: left;\r\n    color: #969696;\r\n`\r\nexport const Input = styled.input`\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 50px;\r\n    padding: 4px 12px;\r\n    border: 1px solid #c8c8c8;\r\n    border-radius: 4px;\r\n    background-color: hsla(0,0%,71%,.1);\r\n`\r\nexport const Button = styled.div`\r\n    margin-top: 20px;\r\n    padding: 12px 18px;\r\n    font-size: 18px;\r\n    border-radius: 25px;\r\n    color: #fff;\r\n    background: #3194d0;\r\n    cursor: pointer;\r\n    text-align: center;\r\n`\r\nexport const Tip= styled.div`\r\n    font-size: 12px;\r\n    height: 20px;\r\n    line-height: 20px;\r\n    color: red;\r\n`","import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { Link, withRouter, Redirect } from 'react-router-dom';\r\nimport { actionCreators } from './store';\r\nimport {\r\n    LoginWrapper,\r\n    LoginTitle,\r\n    SignIn,\r\n    SignUp,\r\n    LoginBox,\r\n    Input,\r\n    Button,\r\n    Tip,\r\n} from './style.js'\r\n\r\nclass Login extends React.PureComponent {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            account: '', //账号是邮箱或者用户名\r\n            password: '',\r\n            errors: {}\r\n        }\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleInputChange(e) {\r\n        this.setState({\r\n            [e.target.name]: e.target.value\r\n        })\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const user = {\r\n            account: this.state.account,\r\n            password: this.state.password,\r\n        }\r\n        this.props.loginUser(user);\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 已登录访问登录页时,立即跳转到首页\r\n        // if (this.props.isAuthenticated) {\r\n        //     this.props.history.push('/');\r\n        // }\r\n\r\n        document.title = '登录-rr';\r\n    }\r\n    // 组件卸载时,清空 error\r\n    componentWillUnmount() {\r\n        this.props.clearErrors();\r\n    }\r\n\r\n    render() {\r\n        const { isAuthenticated, errors } = this.props;\r\n        // isAuthenticated 通过验证,跳转到首页, 不使用生命周期函数实现\r\n        if (!isAuthenticated) {\r\n            return (\r\n                <LoginWrapper>\r\n                    <LoginBox>\r\n                        <LoginTitle>\r\n                            <Link to=\"/login\">\r\n                                <SignIn>登录</SignIn>\r\n                            </Link>\r\n                            <Link to=\"/register\">\r\n                                <SignUp>注册</SignUp>\r\n                            </Link>\r\n                        </LoginTitle>\r\n                        <Input\r\n                            placeholder=\"邮箱或者用户名\"\r\n                            name=\"account\"\r\n                            value={this.state.account}\r\n                            onChange={this.handleInputChange} />\r\n                        <Tip>{errors.get('account')}</Tip>\r\n                        <Input\r\n                            placeholder=\"密码\"\r\n                            name=\"password\"\r\n                            type=\"password\"\r\n                            value={this.state.password}\r\n                            onChange={this.handleInputChange} />\r\n                        <Tip>{errors.get('password')}</Tip>\r\n                        <Button\r\n                            onClick={this.handleSubmit}\r\n                        >登录</Button>\r\n                    </LoginBox>\r\n                </LoginWrapper>\r\n            )\r\n        } else {\r\n            return <Redirect to=\"/\" />\r\n        }\r\n    }\r\n}\r\n\r\n// Login.propTypes = {\r\n//     loginUser: PropTypes.func.isRequired,\r\n//     auth: PropTypes.object.isRequired,\r\n//     errors: PropTypes.object.isRequired\r\n// }\r\n\r\nconst mapStateToProps = state => ({\r\n    isAuthenticated: state.getIn(['login', 'isAuthenticated']),\r\n    errors: state.getIn(['login', 'errors'])\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    loginUser(user) {\r\n        dispatch(actionCreators.loginUser(user));\r\n    },\r\n    clearErrors() {\r\n        dispatch(actionCreators.clearErrors());\r\n    },\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Login));"],"sourceRoot":""}